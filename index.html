<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>دليل الأطباء في ذي قار</title>
<link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;700&display=swap" rel="stylesheet">
<style>
  body { font-family:'Tajawal',sans-serif; margin:0; padding:0; background:#f5f7fa; color:#333; }

  /* رأس الصفحة */
  header {
    background:linear-gradient(135deg, #0066cc, #004080);
    color:#fff;
    text-align:center;
    padding:20px 15px 30px 15px;
    box-shadow:0 4px 12px rgba(0,0,0,0.25);
    border-bottom-left-radius:20px;
    border-bottom-right-radius:20px;
  }
  header img {
    width:120px; height:120px;
    border-radius:50%;
    border:3px solid #fff;
    margin-bottom:10px;
    object-fit:cover;
  }
  header h1 { margin:0; font-size:1.5rem; }

  /* شريط المروجين المتحرك */
  #marquee-container {
    background:#004080;
    color:#fff;
    padding:8px 0;
    overflow:hidden;
    white-space:nowrap;
    display:block;
  }
  #marquee {
    display:inline-block;
    padding-left:100%;
    animation:marquee 40s linear infinite;
  }
  @keyframes marquee {
    0% { transform: translateX(100%); }
    100% { transform: translateX(-100%); }
  }

  /* العناوين */
  .section-title {
    text-align:center;
    margin:20px 0 12px 0;
    font-size:1.1rem;
    font-weight:bold;
    color:#004080;
  }

  /* الشبكة */
  #promoted, #list {
    max-width:1100px;
    margin:0 auto 40px auto;
    padding:0 15px;
    display:grid;
    grid-template-columns:repeat(auto-fill,minmax(260px,1fr));
    gap:15px;
  }

  /* كارت الطبيب */
  .doctor {
    background:#fff;
    padding:16px;
    border-radius:20px;
    box-shadow:0 3px 10px rgba(0,0,0,0.12);
    transition:transform 0.3s, box-shadow 0.3s;
    display:flex;
    flex-direction:column;
    align-items:center;
    text-align:center;
    animation:fadeUp 0.8s ease;
  }
  .doctor:hover {
    transform:translateY(-6px);
    box-shadow:0 8px 18px rgba(0,0,0,0.2);
  }
  .doctor img {
    width:90px; height:90px;
    border-radius:50%;
    object-fit:cover;
    margin-bottom:10px;
    box-shadow:0 2px 8px rgba(0,0,0,0.1);
  }
  .doctor h3 { margin:0 0 5px; font-size:1.15rem; color:#0066cc; }
  .doctor .specialty { color:#444; font-size:0.9rem; margin-bottom:5px; font-weight:bold; }
  .doctor p { margin:3px 0; font-size:0.9rem; }
  .doctor a { color:#009933; text-decoration:none; font-weight:bold; }
  .stars { font-size:1.1rem; margin-top:6px; color:#FFD700; }

  @keyframes fadeUp { from {transform:translateY(20px); opacity:0;} to {transform:translateY(0); opacity:1;} }

  @media (max-width:600px){
    header img { width:100px; height:100px; }
    header h1 { font-size:1.2rem; }
  }
</style>
</head>
<body>

<header>
  <img src="https://images.unsplash.com/photo-1622253692010-333f2da6031d?crop=entropy&cs=tinysrgb&fit=crop&h=400&w=400" alt="طبيب احترافي">
  <h1>دليل الأطباء في ذي قار</h1>
</header>

<!-- شريط المروجين -->
<div id="marquee-container">
  <div id="marquee"></div>
</div>

<h2 class="section-title">الأطباء المروجون</h2>
<div id="promoted">جاري التحميل...</div>

<h2 class="section-title">جميع الأطباء</h2>
<div id="list">جاري التحميل...</div>

<script>
let allDoctors = [];
const cartoonAvatar = "https://i.ibb.co/sqD3V8S/doctor1.png";

// تحميل بيانات الأطباء
async function loadDoctors() {
  const url = "https://docs.google.com/spreadsheets/d/1vkxj1YSt1kHbouOlxoSVHMPMVh0eKElFH0vFDQ-eaRQ/gviz/tq?tqx=out:json";
  const res = await fetch(url);
  const text = await res.text();
  const json = JSON.parse(text.substr(47).slice(0,-2));

  allDoctors = json.table.rows.map(row => ({
    name: row.c[0]?row.c[0].v:"",
    place: row.c[1]?row.c[1].v:"",
    whatsapp: row.c[2]?row.c[2].v:"",
    starsCount: row.c[3]?parseInt(row.c[3].v):0,
    promo: row.c[4]?row.c[4].v:"",
    specialty: row.c[5]?row.c[5].v:"",
    img: cartoonAvatar
  }));

  const promoted = allDoctors.filter(d => d.promo && d.promo.trim().toLowerCase() === "مروج");
  displayDoctors(promoted, "promoted");
  displayDoctors(allDoctors, "list");
  updateMarquee();
}

// تحديث شريط المروجين
function updateMarquee() {
  const promoted = allDoctors.filter(d => d.promo && d.promo.trim().toLowerCase() === "مروج");
  const marqueeDiv = document.getElementById("marquee");
  let text = promoted.map(d => `${d.name} 🩺 ${d.specialty} 📍 ${d.place} |`).join("   ");
  marqueeDiv.textContent = text ? text + "   " + text : "🚑 لا يوجد أطباء مروجون حالياً";
}

// عرض الأطباء
function displayDoctors(doctors, containerId){
  const listDiv = document.getElementById(containerId);
  listDiv.innerHTML = "";
  doctors.forEach(d=>{
    let stars="";
    for(let i=1;i<=5;i++) stars += i<=d.starsCount ? "★":"☆";
    const card = document.createElement("div");
    card.className="doctor";
    card.innerHTML=`
      <img src="${d.img}" alt="طبيب">
      <h3>${d.name}</h3>
      <div class="specialty">🩺 ${d.specialty}</div>
      <p>📍 ${d.place}</p>
      <p>📱 <a href="https://wa.me/${d.whatsapp.replace(/\D/g,"")}" target="_blank">${d.whatsapp}</a></p>
      <p class="stars">${stars}</p>
    `;
    listDiv.appendChild(card);
  });
}

loadDoctors();
</script>

</body>
</html>