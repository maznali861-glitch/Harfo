<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>دليل الأطباء في العراق</title>
<link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;700&display=swap" rel="stylesheet">
<style>
  body { font-family:'Tajawal',sans-serif; margin:0; padding:0; background:#f5f7fa; color:#333; }

  /* رأس الصفحة */
  header { background:#0066cc; color:#fff; text-align:center; padding:25px 15px; box-shadow:0 4px 10px rgba(0,0,0,0.2);}
  header img { width:120px; height:120px; border-radius:50%; border:3px solid #fff; margin-bottom:10px; object-fit:cover; }
  header h1 { margin:5px 0 0; font-size:1.9rem; }

  /* شريط الإعلان */
  .ad-bar {
    background:#0055aa;
    color:#fff;
    padding:10px;
    overflow:hidden;
    white-space:nowrap;
    font-weight:bold;
    font-size:1rem;
    display:flex;
    align-items:center;
    gap:10px;
  }
  .ad-bar a { color:#ffdd00; text-decoration:none; font-weight:bold; }
  .marquee {
    display:inline-block;
    padding-left:100%;
    animation: scroll 18s linear infinite;
  }
  @keyframes scroll {
    0% { transform: translateX(0); }
    100% { transform: translateX(-100%); }
  }

  /* الأطباء */
  #list { max-width:1100px; margin:20px auto 40px auto; padding:0 15px; display:grid; grid-template-columns:repeat(auto-fill,minmax(280px,1fr)); gap:20px; }
  .doctor { background:#fff; padding:18px; border-radius:15px; box-shadow:0 2px 10px rgba(0,0,0,0.1); transition:0.3s; display:flex; flex-direction:column; }
  .doctor:hover { transform:translateY(-5px); box-shadow:0 6px 18px rgba(0,0,0,0.2); }
  .doctor h3 { margin:0 0 8px; font-size:1.2rem; color:#0066cc; }
  .doctor p { margin:4px 0; font-size:0.95rem; }
  .doctor a { color:#009933; text-decoration:none; font-weight:bold; }
  .stars { font-size:1.2rem; margin-top:6px; color:#FFD700; }

  /* زر التليجرام */
  .telegram-btn {
    position:fixed;
    bottom:20px;
    left:20px;
    background:#0088cc;
    color:#fff;
    border-radius:50%;
    width:60px;
    height:60px;
    display:flex;
    align-items:center;
    justify-content:center;
    box-shadow:0 4px 12px rgba(0,0,0,0.25);
    cursor:pointer;
    transition:0.3s;
  }
  .telegram-btn:hover { background:#0077b5; transform:scale(1.1); }
  .telegram-btn img { width:32px; height:32px; }
</style>
</head>
<body>

<header>
  <img src="https://images.unsplash.com/photo-1606813902792-050d1a05f6af?crop=entropy&cs=tinysrgb&fit=crop&h=200&w=200" alt="دكتورة">
  <h1>دليل الأطباء في العراق</h1>
</header>

<div id="ad" class="ad-bar" style="display:none;">
  <div id="ad-content" class="marquee"></div>
</div>

<div id="list">جاري التحميل...</div>

<!-- زر تيليجرام للمزود -->
<a href="https://t.me/tele060" target="_blank" class="telegram-btn" title="للتواصل مع المزود">
  <img src="https://cdn-icons-png.flaticon.com/512/2111/2111646.png" alt="Telegram">
</a>

<script>
async function loadDoctors() {
  const url = "https://docs.google.com/spreadsheets/d/1vkxj1YSt1kHbouOlxoSVHMPMVh0eKElFH0vFDQ-eaRQ/gviz/tq?tqx=out:json";
  const res = await fetch(url);
  const text = await res.text();
  const json = JSON.parse(text.substr(47).slice(0,-2)); 

  const listDiv = document.getElementById("list");
  const adDiv = document.getElementById("ad");
  const adContent = document.getElementById("ad-content");
  listDiv.innerHTML = "";
  adContent.innerHTML = "";
  let adMessages = [];

  json.table.rows.forEach(row => {
    const name = row.c[0] ? row.c[0].v : "";
    const place = row.c[1] ? row.c[1].v : "";
    const whatsapp = row.c[2] ? row.c[2].v : "";
    const starsCount = row.c[3] ? parseInt(row.c[3].v) : 0;
    const promo = row.c[4] ? row.c[4].v : "";

    let stars = "";
    for (let i = 1; i <= 5; i++) stars += i <= starsCount ? "★" : "☆";

    // بطاقة طبيب
    const card = document.createElement("div");
    card.className = "doctor";
    card.innerHTML = `
      <h3>${name}</h3>
      <p>📍 المكان: ${place}</p>
      <p>📱 واتساب: <a href="https://wa.me/${whatsapp}" target="_blank">${whatsapp}</a></p>
      <p class="stars">${stars}</p>
    `;
    listDiv.appendChild(card);

    // إعلان مروج
    if (promo && promo.trim() === "مروج") {
      adMessages.push(`👩‍⚕️ ${name} | ${place} | 📱 <a href="https://wa.me/${whatsapp}" target="_blank">${whatsapp}</a> | ⭐ ${stars}`);
    }
  });

  // عرض الشريط
  if (adMessages.length > 0) {
    adDiv.style.display = "flex";
    adContent.innerHTML = adMessages.join(" 🔹 ");
  }
}

loadDoctors();
</script>

</body>
</html>