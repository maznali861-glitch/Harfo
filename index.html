<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Ø®Ø¯Ù…Ø§Øª Ù…ÙŠØ¯ÙŠØ§</title>
<style>
  :root{ --bg:#f6f8fb; --card:#fff; --accent:#1766b6; --muted:#6b7280; --success:#1f9d55; }
  *{box-sizing:border-box}
  body{ margin:0; font-family: "Segoe UI", Tahoma, Arial; background:linear-gradient(180deg,#eef5fb 0%,var(--bg)100%); color:#06212f; min-height:100vh; display:flex; flex-direction:column; align-items:center;}
  /* loader (app-like) */
  #splash{ position:fixed; inset:0; display:flex; flex-direction:column; justify-content:center; align-items:center; background:linear-gradient(180deg,#1766b6,#2a9df4); color:#fff; z-index:9999;}
  .app-title{ font-size:28px; font-weight:800; animation:fade 1s infinite; }
  .app-sub{ margin-top:8px; opacity:0.95; font-weight:600; }
  @keyframes fade{ 0%,50%,100%{opacity:1} 25%,75%{opacity:0.2} }

  header{ width:100%; max-width:1100px; padding:18px; display:flex; justify-content:center; align-items:center; gap:12px; margin-top:84px; }
  main{ width:100%; max-width:1100px; padding:0 16px 80px; }

  .grid{ display:grid; grid-template-columns:repeat(auto-fill,minmax(280px,1fr)); gap:16px; }

  .card{ background:var(--card); border-radius:12px; padding:16px; box-shadow:0 6px 20px rgba(8,22,37,0.06); }
  .card h3{ margin:0 0 6px 0; font-size:17px; }
  .card p{ margin:0; color:var(--muted); font-size:14px; min-height:44px; }
  .price{ margin-top:10px; font-weight:800; color:#0b2740; }
  .actions{ margin-top:14px; display:flex; gap:10px; justify-content:center; align-items:center; }
  .btn{ background:var(--accent); color:#fff; padding:9px 14px; border-radius:9px; font-weight:700; text-decoration:none; display:inline-block; border:none; cursor:pointer; }
  .btn.link{ background:transparent; color:var(--accent); border:1px solid rgba(23,102,182,0.12); }
  .label-free{ display:inline-block; padding:6px 10px; border-radius:999px; background:rgba(31,157,85,0.12); color:var(--success); font-weight:700; font-size:13px; }

  input[type=text]{ width:100%; padding:10px; border-radius:8px; border:1px solid #e6e9ee; margin-top:8px; font-size:14px; }

  footer{ margin:28px 0 60px; color:var(--muted); }

  @media(max-width:520px){ header{ margin-top:56px; } }
</style>
</head>
<body>

<!-- Ø´Ø§Ø´Ø© Ø¨Ø¯Ø§ÙŠØ© (ØªØ·Ø¨ÙŠÙ‚ÙŠØ©) -->
<div id="splash" aria-hidden="false">
  <div style="text-align:center;">
    <div class="app-title">Ø®Ø¯Ù…Ø§Øª Ù…ÙŠØ¯ÙŠØ§</div>
    <div class="app-sub">ALRAES</div>
  </div>
</div>

<header>
  <div style="text-align:center;">
    <div style="font-weight:800; font-size:18px;">Ø®Ø¯Ù…Ø§Øª Ù…ÙŠØ¯ÙŠØ§</div>
    <div style="font-size:13px; color:var(--muted);">Ø¹Ø±ÙˆØ¶ Ù…Ø¬Ø§Ù†ÙŠØ© ÙˆÙ‚Ø§Ø¨Ù„Ø© Ù„Ù„ØªØ­Ø¯ÙŠØ«</div>
  </div>
</header>

<main>
  <!-- Ø¹Ø±ÙˆØ¶ Ù…Ø¬Ø§Ù†ÙŠØ© (Ø³ØªØ¸Ù‡Ø± Ø£ÙˆÙ„Ø§Ù‹) -->
  <section>
    <h2 style="text-align:center; margin:0 0 8px 0;">Ø§Ù„Ø¹Ø±ÙˆØ¶ Ø§Ù„Ù…Ø¬Ø§Ù†ÙŠØ©</h2>
    <div id="free-offers" class="grid" style="margin-top:12px;"></div>
  </section>

  <!-- Ø¹Ø±ÙˆØ¶ Ø§Ù„Ø´Ø±Ø§Ø¡ Ø§Ù„Ø«Ø§Ø¨ØªØ© -->
  <section style="margin-top:28px;">
    <h2 style="text-align:center; margin:0 0 8px 0;">Ø¹Ø±ÙˆØ¶ Ø§Ù„Ø´Ø±Ø§Ø¡</h2>
    <div class="grid" style="margin-top:12px;">
      <div class="card">
        <h3>1000 Ù…ØªØ§Ø¨Ø¹</h3>
        <p>Ø­Ø²Ù…Ø© 1000 Ù…ØªØ§Ø¨Ø¹ â€” ØªÙˆØµÙŠÙ„ Ø³Ø±ÙŠØ¹ ÙˆØ¢Ù…Ù†.</p>
        <div class="price">Ø§Ù„Ø³Ø¹Ø±: <strong>10,000</strong></div>
        <div class="actions"><a class="btn" href="https://t.me/mrdinary" target="_blank" rel="noopener">Ø´Ø±Ø§Ø¡ â€” ØªÙˆØ§ØµÙ„ Ø¹Ø¨Ø± ØªÙŠÙ„ÙŠØ¬Ø±Ø§Ù…</a></div>
      </div>

      <div class="card">
        <h3>10,000 Ù…ØªØ§Ø¨Ø¹</h3>
        <p>Ø­Ø²Ù…Ø© ÙƒØ¨ÙŠØ±Ø© Ù„Ø²ÙŠØ§Ø¯Ø© Ø§Ù„Ø§Ù†ØªØ´Ø§Ø±.</p>
        <div class="price">Ø§Ù„Ø³Ø¹Ø±: <strong>35,000 Ø¯ÙŠÙ†Ø§Ø±</strong></div>
        <div class="actions"><a class="btn" href="https://t.me/mrdinary" target="_blank" rel="noopener">Ø´Ø±Ø§Ø¡ â€” ØªÙˆØ§ØµÙ„ Ø¹Ø¨Ø± ØªÙŠÙ„ÙŠØ¬Ø±Ø§Ù…</a></div>
      </div>
    </div>
  </section>
</main>

<footer>Â© ALRAES â€” Ø®Ø¯Ù…Ø§Øª Ù…ÙŠØ¯ÙŠØ§</footer>

<script>
/* Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø¨ÙˆØª - Ø§Ø³ØªØ¨Ø¯Ù„ Ø¨Ø§Ù„Ù‚ÙŠÙ… Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠØ© */
const BOT_TOKEN = "357723373:AAHz5-Mj8GWT1NMKTmicYHq8aMDq6BJgMeM";
const CHAT_ID = "250273112";

/* Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª â€” Google Sheet (Ù…Ø¬Ø§Ù†ÙŠ) */
const sheetId = "12IiMlRNM1ncH5H25mceOmRFyvqbS-1nbtn0PG0qRJSk";
const sheetName = "Sheet1";

/* Ø¹Ù†Ø¯ Ø§Ù„Ø¯Ø®ÙˆÙ„: Ø¥Ø®ÙØ§Ø¡ Ø´Ø§Ø´Ø© Ø§Ù„Ø¨Ø¯Ø§ÙŠØ© Ø¨Ø¹Ø¯ Ø²Ù…Ù† Ù‚ØµÙŠØ± */
window.addEventListener('load', ()=>{
  setTimeout(()=> {
    const splash = document.getElementById('splash');
    if(splash) splash.style.display = 'none';
    loadFreeOffers();
  }, 1600);
});

/* Ø¬Ù„Ø¨ Ø§Ù„Ø¹Ø±ÙˆØ¶ Ù…Ù† Google Sheets (GViz JSON) */
function loadFreeOffers(){
  const url = `https://docs.google.com/spreadsheets/d/${sheetId}/gviz/tq?tqx=out:json&sheet=${encodeURIComponent(sheetName)}`;
  fetch(url).then(r => r.text()).then(txt => {
    const json = JSON.parse(txt.substring(47).slice(0,-2));
    const rows = json.table.rows || [];
    renderFreeOffers(rows);
  }).catch(err => {
    console.error('Error loading sheet', err);
    document.getElementById('free-offers').innerHTML = `<div style="grid-column:1/-1; text-align:center; color:#b91c1c;">ØªØ¹Ø°Ø± ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¹Ø±ÙˆØ¶ Ù…Ù† Google Sheets.</div>`;
  });
}

/* Ø¹Ø±Ø¶ Ø§Ù„Ø¨Ø·Ø§Ù‚Ø§Øª Ø§Ù„Ù…Ø¬Ø§Ù†ÙŠØ© */
function renderFreeOffers(rows){
  const container = document.getElementById('free-offers');
  container.innerHTML = '';

  // Ù†Ø¹Ø±Ø¶ Ø£ÙˆÙ„Ø§Ù‹ Ø§Ù„Ø¹Ù†Ø§ØµØ± Ø§Ù„Ù…Ø¬Ø§Ù†ÙŠØ© ÙÙ‚Ø·
  const filtered = rows.filter(r => (r.c[2]?.v || '').toString().trim() === 'Ù…Ø¬Ø§Ù†ÙŠ');

  if(filtered.length === 0){
    container.innerHTML = `<div style="grid-column:1/-1; text-align:center; color:var(--muted);">Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¹Ø±ÙˆØ¶ Ù…Ø¬Ø§Ù†ÙŠØ© Ø­Ø§Ù„ÙŠØ§Ù‹.</div>`;
    return;
  }

  filtered.forEach((r, idx) => {
    const link = r.c[0]?.v || '';
    const desc = r.c[1]?.v || 'Ø¹Ø±Ø¶ Ù…Ø¬Ø§Ù†ÙŠ';
    const card = document.createElement('div');
    card.className = 'card';

    const h = document.createElement('h3');
    h.textContent = desc.length>36 ? desc.slice(0,36)+'â€¦' : desc;
    card.appendChild(h);

    const p = document.createElement('p');
    p.textContent = desc;
    p.style.cursor = link ? 'pointer' : 'default';
    if(link){
      p.title = 'Ø§Ø¶ØºØ· Ù„Ù„Ø°Ù‡Ø§Ø¨ Ù„Ù„Ù…Ù‡Ù…Ø©';
      p.onclick = () => {
        // ÙØªØ­ Ø§Ù„Ù…Ù‡Ù…Ø© ÙÙŠ ØªØ¨ÙˆÙŠØ¨ Ø¬Ø¯ÙŠØ¯
        window.open(link, '_blank', 'noopener');
        // Ø¨Ø¹Ø¯ Ù„Ø­Ø¸Ø©ØŒ Ø¥Ø¸Ù‡Ø§Ø± Ø²Ø± "Ù‡Ù„ Ø£ÙƒÙ…Ù„Øª Ø§Ù„Ù…Ù‡Ù…Ø©ØŸ"
        setTimeout(()=> addDoneButton(card, idx, desc, link), 700);
      };
    }
    card.appendChild(p);

    // Ø´Ø§Ø±Ø© Ù…Ø¬Ø§Ù†ÙŠ
    const lbl = document.createElement('div');
    lbl.className = 'label-free';
    lbl.style.marginTop = '10px';
    lbl.textContent = 'Ù…ÙØ¬Ù‘Ø§Ù†ÙŠ';
    card.appendChild(lbl);

    container.appendChild(card);
  });
}

/* Ø¥Ù†Ø´Ø§Ø¡ Ø²Ø± "Ù‡Ù„ Ø£ÙƒÙ…Ù„Øª Ø§Ù„Ù…Ù‡Ù…Ø©ØŸ" */
function addDoneButton(card, index, description, link){
  if(card.querySelector(`#done-${index}`)) return;
  const actions = document.createElement('div');
  actions.className = 'actions';
  const doneBtn = document.createElement('button');
  doneBtn.id = `done-${index}`;
  doneBtn.className = 'btn link';
  doneBtn.textContent = 'Ù‡Ù„ Ø£ÙƒÙ…Ù„Øª Ø§Ù„Ù…Ù‡Ù…Ø©ØŸ';

  doneBtn.onclick = () => {
    doneBtn.remove();
    showGrabFields(card, index, description, link);
  };

  actions.appendChild(doneBtn);
  card.appendChild(actions);
}

/* Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø±Ø³Ø§Ù„Ø© Ù…Ø¨Ø§Ø´Ø±Ø© Ù„Ù„Ø¨ÙˆØª Ø¹Ø¨Ø± Telegram API */
async function sendToBot(username, offer, link) {
  const message = `ğŸ¯ *Ø·Ù„Ø¨ Ø³Ø­Ø¨ Ø¬Ø¯ÙŠØ¯*\n\nğŸ‘¤ *Ø§Ù„ÙŠÙˆØ²Ø±:* ${username}\nğŸ“‹ *Ø§Ù„Ø¹Ø±Ø¶:* ${offer}\nğŸ”— *Ø§Ù„Ø±Ø§Ø¨Ø·:* ${link || 'Ù„Ø§ ÙŠÙˆØ¬Ø¯'}\nâ° *Ø§Ù„ÙˆÙ‚Øª:* ${new Date().toLocaleString('ar-SA')}`;
  
  const url = `https://api.telegram.org/bot${BOT_TOKEN}/sendMessage`;
  
  try {
    const response = await fetch(url, {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
      },
      body: JSON.stringify({
        chat_id: CHAT_ID,
        text: message,
        parse_mode: 'Markdown'
      })
    });
    
    const result = await response.json();
    return result.ok;
  } catch (error) {
    console.error('Error sending to bot:', error);
    return false;
  }
}

/* Ø¥Ø¸Ù‡Ø§Ø± Ø­Ù‚Ù„ Ø§Ù„ÙŠÙˆØ²Ø± ÙˆØ²Ø± Ø§Ù„Ø³Ø­Ø¨ØŒ ÙˆØ¥Ø±Ø³Ø§Ù„Ù‡Ø§ Ù„Ù„Ø¨ÙˆØª Ù…Ø¨Ø§Ø´Ø±Ø© */
function showGrabFields(card, index, description, link){
  if(card.querySelector(`#tiktok-${index}`)) return;
  const input = document.createElement('input');
  input.type = 'text';
  input.id = `tiktok-${index}`;
  input.placeholder = 'Ø¶Ø¹ ÙŠÙˆØ²Ø± ØªÙŠÙƒ ØªÙˆÙƒ Ù‡Ù†Ø§ (Ù…Ø«Ø§Ù„: user123)';

  const grabBtn = document.createElement('button');
  grabBtn.className = 'btn';
  grabBtn.textContent = 'Ø³Ø­Ø¨';

  grabBtn.onclick = async () => {
    const user = input.value.trim();
    if(!user){ 
      alert('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ ÙŠÙˆØ²Ø± ØªÙŠÙƒ ØªÙˆÙƒ'); 
      input.focus(); 
      return; 
    }

    grabBtn.disabled = true;
    grabBtn.textContent = 'Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„...';

    // Ø¥Ø±Ø³Ø§Ù„ Ù…Ø¨Ø§Ø´Ø± Ù„Ù„Ø¨ÙˆØª
    const success = await sendToBot(user, description, link);
    
    if(success) {
      alert('âœ… ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø³Ø­Ø¨ Ø¨Ù†Ø¬Ø§Ø­! Ø³Ù†Ø±Ø§Ø³Ù„Ùƒ Ø¹Ø¨Ø± ØªÙŠÙ„ÙŠØ¬Ø±Ø§Ù… Ù‚Ø±ÙŠØ¨Ø§Ù‹.');
      input.value = '';
      grabBtn.textContent = 'ØªÙ… Ø§Ù„Ø³Ø­Ø¨';
      grabBtn.style.backgroundColor = '#1f9d55';
    } else {
      alert('âŒ ÙØ´Ù„ ÙÙŠ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨. Ø­Ø§ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰ Ø£Ùˆ ØªÙˆØ§ØµÙ„ Ù…Ø¹ Ø§Ù„Ø¯Ø¹Ù….');
      grabBtn.disabled = false;
      grabBtn.textContent = 'Ø³Ø­Ø¨';
    }
  };

  const wrapper = document.createElement('div');
  wrapper.style.marginTop = '10px';
  wrapper.appendChild(input);
  wrapper.appendChild(document.createElement('br'));
  wrapper.appendChild(grabBtn);

  card.appendChild(wrapper);
}
</script>

</body>
</html>